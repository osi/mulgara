<jxu>
  <set name="debug" value="false" />

  <set name="modelName" value="@server@#diff" />
  <set name="loadCommand" value="load &lt;@baseuri@/jxdata/iTQL/testdifference.rdf&gt; into &lt;@server@#diff&gt; ;" />
  <eval stepClass="org.kowari.store.jxunit.LoadDataJX" />

  <ifEqual converse="true" file="result1.txt" name="loadResult">
    <save name="loadResult" file="badLoadResult1.xml"/>
    <fail>Output failed.  Check badLoadResult1.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
         $person $parent
         from &lt;@server@#diff&gt;
         where $person &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:human&gt;
           and $person &lt;urn:test:hasParent&gt; $parent
           minus $parent &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:alien&gt;
         order by $person $parent ;"/>

  <eval stepClass="org.kowari.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult1.txt" name="queryResult">
    <save name="queryResult" file="badQuery1Result.xml"/>
    <fail>Output failed.  Check badQuery1Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
         $person $parent
         from &lt;@server@#diff&gt;
         where $person &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:human&gt;
           and $person &lt;urn:test:hasParent&gt; $parent
           minus (
               $parent &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:alien&gt;
            or $parent &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:hybrid&gt;
           )
         order by $person $parent ;"/>

  <eval stepClass="org.kowari.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult2.txt" name="queryResult">
    <save name="queryResult" file="badQuery2Result.xml"/>
    <fail>Output failed.  Check badQuery2Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
         $person $parent
         from &lt;@server@#diff&gt;
         where $person &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:human&gt;
           and $person &lt;urn:test:hasParent&gt; $parent
           minus (
               $person &lt;urn:test:hasParent&gt; $p
               and (
                   $p &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:alien&gt;
                or $p &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;urn:test:hybrid&gt;
               )
           )
           order by $person $parent ;"/>

  <eval stepClass="org.kowari.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult3.txt" name="queryResult">
    <save name="queryResult" file="badQuery3Result.xml"/>
    <fail>Output failed.  Check badQuery3Result.xml for output.</fail>
  </ifEqual>

</jxu>
