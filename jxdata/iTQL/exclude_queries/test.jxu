<jxu>
  <set name="debug" value="false" />

  <set name="modelName" value="@server@#vcard1" />
  <set name="loadCommand" value="load &lt;@baseuri@/jxdata/iTQL/vcards.rdf&gt; into &lt;@server@#vcard1&gt; ;" />
  <eval stepClass="org.mulgara.store.jxunit.LoadDataJX" />

  <ifEqual converse="true" file="result1.txt" name="loadResult">
    <save name="loadResult" file="badLoadResult1.xml"/>
    <fail>Output failed.  Check badLoadResult1.xml for output.</fail>
  </ifEqual>

  <set name="modelName" value="@server@#vcard2" />
  <set name="loadCommand" value="load &lt;@baseuri@/jxdata/iTQL/vcards2.rdf&gt; into &lt;@server@#vcard2&gt; ;" />
  <eval stepClass="org.mulgara.store.jxunit.LoadDataJX" />

  <ifEqual converse="true" file="result2.txt" name="loadResult">
    <save name="loadResult" file="badLoadResult2.xml"/>
    <fail>Output failed.  Check badLoadResult2.xml for output.</fail>
  </ifEqual>

  <set name="modelName" value="@server@#testexclude" />
  <set name="loadCommand" value="load &lt;@baseuri@/jxdata/iTQL/testexclude.rdf&gt; into &lt;@server@#testexclude&gt; ;" />
  <eval stepClass="org.mulgara.store.jxunit.LoadDataJX" />

  <ifEqual converse="true" file="result3.txt" name="loadResult">
    <save name="loadResult" file="badLoadResult3.xml"/>
    <fail>Output failed.  Check badLoadResult3.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
           count( select $s $p $o 
           from &lt;@server@#vcard2&gt;
           where $s $p $o ) 
         from &lt;@server@#&gt; 
         where $tmp &lt;http://mulgara.org/mulgara#is&gt; &lt;urn:foo:bar:baz&gt; ;"/>

  <eval stepClass="org.mulgara.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult1.txt" name="queryResult">
    <save name="queryResult" file="badQuery1Result.xml"/>
    <fail>Output failed.  Check badQuery1Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
           count( select $s $o 
           from &lt;@server@#vcard2&gt;
           where $s &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; $o ) 
         from &lt;@server@#&gt; 
         where $tmp &lt;http://mulgara.org/mulgara#is&gt; &lt;urn:foo:bar:baz&gt; ;"/>

  <eval stepClass="org.mulgara.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult2.txt" name="queryResult">
    <save name="queryResult" file="badQuery2Result.xml"/>
    <fail>Output failed.  Check badQuery2Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select 
           count( select $s $o 
           from &lt;@server@#vcard2&gt;
           where exclude $s &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; $o ) 
         from &lt;@server@#&gt; 
         where $tmp &lt;http://mulgara.org/mulgara#is&gt; &lt;urn:foo:bar:baz&gt; ;"/>

  <eval stepClass="org.mulgara.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult3.txt" name="queryResult">
    <save name="queryResult" file="badQuery3Result.xml"/>
    <fail>Output failed.  Check badQuery3Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="select $s $p $o 
         from &lt;@server@#vcard2&gt; 
         where $s $p $o 
         and exclude($s &lt;http://www.w3.org/2001/vcard-rdf/3.0#EMAIL&gt; $o ) 
         and $s &lt;http://mulgara.org/mulgara#is&gt; &lt;http://qqq.com/staff/lsimpson&gt; 
         and exclude ($s &lt;http://www.w3.org/2001/vcard-rdf/3.0#N&gt; $o ) 
         and exclude ($s &lt;http://www.w3.org/2001/vcard-rdf/3.0#ADR&gt; $o ) 
         and exclude ($s &lt;http://www.w3.org/2001/vcard-rdf/3.0#TEL&gt; $o )
         order by $s $p $o;"/>

  <eval stepClass="org.mulgara.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult4.txt" name="queryResult">
    <save name="queryResult" file="badQuery4Result.xml"/>
    <fail>Output failed.  Check badQuery4Result.xml for output.</fail>
  </ifEqual>

  <set name="query"
  value="
    select $s $p $x count (
      select $type
      from &lt;@server@#testexclude&gt;
      where $s $p $type
      and $type &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; $o2
      and exclude($type $p2 $x ))
    from &lt;@server@#testexclude&gt;
    where $r &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#type&gt; &lt;http://www.w3.org/2002/07/owl#Restriction&gt;
    and $r &lt;http://www.w3.org/2002/07/owl#onProperty&gt; $p
    and $r &lt;http://www.w3.org/2002/07/owl#allValuesFrom&gt; $x
    and $s $p $o2
    having $k0 &lt;http://mulgara.org/mulgara#occursMoreThan&gt; '0.0'^^&lt;http://www.w3.org/2001/XMLSchema#double&gt;
    order by $s ; "/>

  <eval stepClass="org.mulgara.store.jxunit.QueryJX" />
  <ifEqual converse="true" file="queryResult5.txt" name="queryResult">
    <save name="queryResult" file="badQuery5Result.xml"/>
    <fail>Output failed.  Check badQuery5Result.xml for output.</fail>
  </ifEqual>
</jxu>